version: 1.0
name: virtualmachine-apb
description: APB for managing Virtual Machine
bindable: False
async: optional
metadata:
  displayName: Virtual Machine (APB)
  imageUrl: https://cdn.pbrd.co/images/H5Gutd7.png
plans:
  - name: default
    description: Virtual machine created from custom YAML
    free: True
    metadata:
      displayName: Custom YAML
      longDescription: Virtual machine created from custom YAML
    parameters:
      - name: admin_user
        title: Openshift Admin User
        type: string
        required: true
      - name: admin_password
        title: Openshift Admin Password
        type: password
        required: true
      - name: custom_yaml
        title: Custom configuration (YAML)
        type: string
        display_type: textarea
        required: true

  - name: linux
    description: Linux Virtual Machine Deployment
    free: True
    metadata:
      displayName: Linux Virtual Machine
      longDescription: Virtual machine with pre-installed Linux
    parameters:
      - name: admin_user
        title: Openshift Admin User
        type: string
        required: true
      - name: admin_password
        title: Openshift Admin Password
        type: password
        required: true
      - name: vmname
        title: Name
        type: string
        display_type: text
        required: true
      - name: vmmemory
        title: Memory (in MiB)
        type: enum
        required: true
        enum: [32, 64, 512, 1024, 2048]
        default: 64
      - name: vmdiskimage
        default: 'fedora-cloud'
        title: Disk Image
        type: enum
        enum: ['alpine', 'cirros', 'fedora-cloud']
        display_type: select
